{% extends "base.html" %}

{% block content %}

<div class="card p-4 shadow">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h3>Listado de Reclamos</h3>
        <a href="/nuevo" class="btn btn-primary">+ Nuevo Reclamo</a>
    </div>

    <table class="table table-dark table-striped">

        <thead>
            <tr>
                <th>ID</th>
                <th>N° Socio</th>
                <th>Nombre</th>
                <th>Dirección</th>
                <th>Teléfono</th>
                <th>Descripción</th>
                <th>Estado</th>
                <th>Inicio</th>
                <th>Actualización</th>
            </tr>
        </thead>

        <tbody>

            {% for r in reclamos %}
            <tr>

                <td>{{ r.id }}</td>
                <td>{{ r.numero_socio }}</td>
                <td>{{ r.nombre }}</td>
                <td>{{ r.direccion }}</td>
                <td>{{ r.telefono }}</td>
                <td>{{ r.reclamo }}</td>

                <td>
                    <form method="POST" action="/cambiar_estado/{{ r.id }}">
                        <select name="estado" onchange="this.form.submit()" class="form-select">

                            <option {% if r.estado == 'Pendiente' %}selected{% endif %}>Pendiente</option>
                            <option {% if r.estado == 'En proceso' %}selected{% endif %}>En proceso</option>
                            <option {% if r.estado == 'Finalizado' %}selected{% endif %}>Finalizado</option>

                        </select>
                    </form>
                </td>

                <td>{{ r.fecha_creacion }}</td>
                <td>{{ r.fecha_actualizacion }}</td>

            </tr>
            {% endfor %}

        </tbody>

    </table>

</div>

{% endblock %}